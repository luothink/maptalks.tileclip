export default `(function(t){"use strict";function e(t,e){n(t.geometry,e)}function n(t,e){if(t)switch(t.type){case"Point":r(t.coordinates,e);break;case"MultiPoint":case"LineString":o(t.coordinates,e);break;case"MultiLineString":!function(t,e){for(let n=0,r=t.length;n<r;n++)o(t[n],e)}(t.coordinates,e);break;case"Polygon":i(t.coordinates,e);break;case"MultiPolygon":!function(t,e){for(let n=0,r=t.length;n<r;n++)i(t[n],e)}(t.coordinates,e);break;case"GeometryCollection":const a=t.geometries.length;for(let r=0;r<a;r++)n(t.geometries[r],e)}}function r(t,e){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function o(t,e){for(let n=0,o=t.length;n<o;n++)r(t[n],e)}function i(t,e){t.length&&o(t[0],e)}var a=function(t){let r=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];switch(t.type){case"FeatureCollection":const o=t.features.length;for(let n=0;n<o;n++)e(t.features[n],r);break;case"Feature":e(t,r);break;default:n(t,r)}return r},s=h;function h(t,e,n){var r,o,i,a,s,h=t.length,u=l(t[0],e),f=[];for(n||(n=[]),r=1;r<h;r++){for(o=t[r-1],a=s=l(i=t[r],e);;){if(!(u|a)){f.push(o),a!==s?(f.push(i),r<h-1&&(n.push(f),f=[])):r===h-1&&f.push(i);break}if(u&a)break;u?u=l(o=c(o,i,u,e),e):a=l(i=c(o,i,a,e),e)}u=s}return f.length&&n.push(f),n}function c(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function l(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function u(t){return"number"==typeof t}function f(t){return Array.isArray(t)?t:[t]}h.polyline=h,h.polygon=function(t,e){var n,r,o,i,a,s,h;for(r=1;r<=8;r*=2){for(n=[],i=!(l(o=t[t.length-1],e)&r),a=0;a<t.length;a++)(h=!(l(s=t[a],e)&r))!==i&&n.push(c(o,s,r,e)),h&&n.push(s),o=s,i=h;if(!(t=n).length)break}return n};const m=new Error("not find canvas.The current environment does not support OffscreenCanvas");function d(t){const[e,n]=t,r=6378137,o=e*Math.PI/180*r,i=n*Math.PI/180;return[o,3189068.5*Math.log((1+Math.sin(i))/(1-Math.sin(i)))]}let g;function p(t=256){return!g&&OffscreenCanvas&&(g=new OffscreenCanvas(1,1)),g&&M(g,t,t),g}function M(t,e,n){t&&(t.width=e,t.height=n)}function x(t){const e=t.canvas;t.clearRect(0,0,e.width,e.height)}function b(t){return t.getContext("2d",{willReadFrequently:!0})}function v(t){const e=p(t);return x(b(e)),e.transferToImageBitmap()}function w(t){if(1===t.length)return t[0];if(0===t.length)return new Error("merge tiles error,not find imagebitmaps");for(let e=0,n=t.length;e<n;e++){if(!(t[e]instanceof ImageBitmap))return new Error("merge tiles error,images not imagebitmap")}const e=t[0].width,n=p(e),r=b(n);return x(r),t.forEach((t=>{r.drawImage(t,0,0,e,e)})),n.transferToImageBitmap()}function I(t,e,n){const r=b(t);x(r),r.save();r.beginPath(),e.forEach((t=>{(t=>{for(let e=0,n=t.length;e<n;e++){const n=t[e],o=n[0],i=n[n.length-1],[a,s]=o,[h,c]=i;a===h&&s===c||n.push(o);for(let t=0,e=n.length;t<e;t++){const[e,o]=n[t];0===t?r.moveTo(e,o):r.lineTo(e,o)}}})(t)})),r.clip("evenodd"),r.drawImage(n,0,0,t.width,t.height);const o=t.transferToImageBitmap();return r.restore(),o}function y(t,e,n){if(!n)return e;M(t,e.width,e.height);const r=b(t);x(r),r.save(),r.filter=n,r.drawImage(e,0,0),r.restore();return t.transferToImageBitmap()}function z(t,e=1){if(!u(e)||1===e||e<0||e>1)return t;const n=p();M(n,t.width,t.height);const r=b(n);x(r),r.globalAlpha=e,r.drawImage(t,0,0);const o=n.transferToImageBitmap();return r.globalAlpha=1,o}function E(t){const[e,n,r,o]=t;return[[e,n],[r,n],[r,o],[e,o]]}function P(t){let e=1/0,n=1/0,r=-1/0,o=-1/0;return t.forEach((t=>{e=Math.min(e,t[0]),r=Math.max(r,t[0]),n=Math.min(n,t[1]),o=Math.max(o,t[1])})),[e,n,r,o]}const T={};function A(t){return"EPSG:3857"===t}function B(t,e){return function(t){if(!t)return!1;const e=(t.geometry||{type:null}).type;return"Polygon"===e||"MultiPolygon"===e}(e)?T[t]?new Error("the"+t+" geojson Already exists"):(T[t]=e,function(t){t.bbox=t.bbox||a(t)}(e),e):new Error("geojson.feature is not Polygon")}function k(t,e){if(A(t)){const t=e=>{const n=[];for(let r=0,o=e.length;r<o;r++){const o=e[r];Array.isArray(o[0])?n.push(t(o)):n[r]=d(o)}return n};return t(e)}return e}function N(t,e,n){const[r,o,i,a]=t,s=(i-r)/e,h=(a-o)/e,[c,l]=n;return[(c-r)/s,e-(l-o)/h]}function O(t,e,n,r){const[o,i,a,s]=e,h=(t,e)=>{const r=[];for(let o=0,i=t.length;o<i;o++){const i=t[o];Array.isArray(i[0])?r.push(h(i,e)):r[o]=N(e,n,i)}return r};if(A(t)){const[t,e]=d([o,i]),[n,c]=d([a,s]);return h(r,[t,e,n,c])}return h(r,e)}function C(t){return new Promise(((e,n)=>{const{tile:r,tileBBOX:o,projection:i,tileSize:a,maskId:h,returnBlobURL:c}=t;if(!r)return void n(new Error("tile is null.It should be a ImageBitmap"));if(!o)return void n(new Error("tileBBOX is null"));if(!i)return void n(new Error("projection is null"));if(!a)return void n(new Error("tileSize is null"));if(!h)return void n(new Error("maskId is null"));const l=T[h];if(!l)return void n(new Error("not find mask by maskId:"+h));const u=p(a);if(!u)return void n(m);const f=t=>{c?function(t){const e=p();M(e,t.width,t.height);const n=b(e);return x(n),n.drawImage(t,0,0),e.convertToBlob()}(t).then((t=>{const n=URL.createObjectURL(t);e(n)})).catch((t=>{n(t)})):e(t)},d=l.bbox;if(!d)return void f(r);const{coordinates:g,type:w}=l.geometry;if(!g.length)return void f(r);if(z=o,(y=d)[2]<z[0]||y[1]>z[3]||y[0]>z[2]||y[3]<z[1])return void f(v(a));var y,z;let E,P=g;if("Polygon"===w&&(P=[P]),function(t,e){const[n,r,o,i]=t;return n>=e[0]&&o<=e[2]&&r>=e[1]&&i<=e[3]}(d,o)){E=k(i,P);return void f(I(u,O(i,o,a,E),r))}const A=t=>{if(t.length>0){let e=1/0,n=-1/0,r=1/0,o=-1/0;for(let i=0,a=t.length;i<a;i++){const[a,s]=t[i];e=Math.min(a,e),r=Math.min(s,r),n=Math.max(a,n),o=Math.max(s,o)}if(e!==n&&r!==o)return!0}return!1},B=[];for(let t=0,e=P.length;t<e;t++){const e=P[t];for(let t=0,n=e.length;t<n;t++){const n=e[t],r=s.polygon(n,o);A(r)&&B.push([r])}}if(0===B.length)return void f(v());E=k(i,B);f(I(u,O(i,o,a,E),r))}))}const S=()=>{};const j={accept:"image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36 Edg/107.0.1418.26"},Y=new class{constructor(t,e){this.max=t,this.onRemove=e||S,this.reset()}reset(){if(this.data){const t=this.data.values();for(const e of t)this.onRemove(e)}return this.data=new Map,this}clear(){this.reset(),delete this.onRemove}add(t,e){return e?(this.has(t)?(this.data.delete(t),this.data.set(t,e),this.data.size>this.max&&this.shrink()):(this.data.set(t,e),this.data.size>this.max&&this.shrink()),this):this}keys(){const t=new Array(this.data.size);let e=0;const n=this.data.keys();for(const r of n)t[e++]=r;return t}shrink(){const t=this.data.keys();let e=t.next();for(;this.data.size>this.max;){const n=this.getAndRemove(e.value);n&&this.onRemove(n),e=t.next()}}has(t){return this.data.has(t)}getAndRemove(t){if(!this.has(t))return null;const e=this.data.get(t);return this.data.delete(t),e}get(t){if(!this.has(t))return null;return this.data.get(t)}remove(t){if(!this.has(t))return this;const e=this.data.get(t);return this.data.delete(t),this.onRemove(e),this}setMaxSize(t){return this.max=t,this.data.size>this.max&&this.shrink(),this}}(200,(t=>{t&&t.close&&t.close()}));function G(t,e={},n){return new Promise(((r,o)=>{const i=t=>{createImageBitmap(t).then((t=>{r(t)})).catch((t=>{o(t)}))},a=Y.get(t);if(a)i(a);else{const r=n.fetchOptions||{headers:e,referrer:n.referrer};fetch(t,r).then((t=>t.blob())).then((t=>createImageBitmap(t))).then((e=>{Y.add(t,e),i(e)})).catch((t=>{o(t)}))}}))}function R(t){const{urlTemplate:e,x:n,y:r,z:o,maxAvailableZoom:i,subdomains:a}=t,s=i&&u(i)&&i>=1;return new Promise(((h,c)=>{if(!s)return void c(new Error("maxAvailableZoom is error"));if(!e)return void c(new Error("urlTemplate is error"));if(!u(n)||!u(r)||!u(o))return void c(new Error("x/y/z is error"));const l=f(e);for(let t=0,e=l.length;t<e;t++){const e=l[t];if(e&&e.indexOf("{s}")>-1&&(!a||0===a.length))return void c(new Error("not find subdomains"))}let d,g,v,I,E=n,P=r,T=o;const A=o-i;if(A>0){let t=n,e=r,a=o;for(;a>i;)t=Math.floor(t/2),e=Math.floor(e/2),a--;const s=Math.pow(2,A);let h=Math.floor(t*s),c=h+s,l=Math.floor(e*s),u=l+s;h>n&&(h--,c--),l>r&&(l--,u--),d=(n-h)/(c-h),g=(r-l)/(u-l),v=1/(c-h),I=1/(u-l),E=t,P=e,T=i}const B=l.map((t=>{let e="{x}";for(;t.indexOf(e)>-1;)t=t.replace(e,E);for(e="{y}";t.indexOf(e)>-1;)t=t.replace(e,P);for(e="{z}";t.indexOf(e)>-1;)t=t.replace(e,T);return function(t,e){if(!e||!e.length)return t;const n=e.length;let r=Math.floor(Math.random()*n);for(r=Math.min(r,n-1);t.indexOf("{s}")>-1;)t=t.replace("{s}",e[r]);return t}(t,a)})),k=Object.assign({},j,t.headers||{}),N=B.map((e=>G(e,k,t)));Promise.all(N).then((e=>{const n=p();if(!n)return void c(m);const r=w(e);if(r instanceof Error)return void c(r);let o;const i=t.filter;if(o=i?y(n,r,i):r,A<=0)return void h(z(o,t.opacity));const{width:a,height:s}=o,l=function(t,e,n,r,o,i){M(t,e.width,e.height);const a=b(t);return x(a),a.save(),a.drawImage(e,n,r,o,i,0,0,t.width,t.height),a.restore(),t.transferToImageBitmap()}(n,o,a*d,s*g,a*v,s*I);h(z(l,t.opacity))})).catch((t=>{c(t)}))}))}const F=Math.PI/180,L=180/Math.PI,_=6378137,W=20037508.342789244,Z="900913",U={};function V(t){return Number(t)===t&&t%1!=0}const X=256,D=[-180,90],q=[-20037508.342787,20037508.342787],K=["EPSG:4326","EPSG:3857"],H=new class{#t;#e;#n;#r;#o;#i;constructor(t={}){if(this.#t=t.size||256,this.#e=t.antimeridian?2:1,!U[this.#t]){let t=this.#t;const e=U[this.#t]={};e.Bc=[],e.Cc=[],e.zc=[],e.Ac=[];for(let n=0;n<30;n++)e.Bc.push(t/360),e.Cc.push(t/(2*Math.PI)),e.zc.push(t/2),e.Ac.push(t),t*=2}this.#n=U[this.#t].Bc,this.#r=U[this.#t].Cc,this.#o=U[this.#t].zc,this.#i=U[this.#t].Ac}px(t,e){if(V(e)){const n=this.#t*Math.pow(2,e),r=n/2,o=n/360,i=n/(2*Math.PI),a=n,s=Math.min(Math.max(Math.sin(F*t[1]),-.9999),.9999);let h=r+t[0]*o,c=r+.5*Math.log((1+s)/(1-s))*-i;return h>a*this.#e&&(h=a*this.#e),c>a&&(c=a),[h,c]}{const n=this.#o[e],r=Math.min(Math.max(Math.sin(F*t[1]),-.9999),.9999);let o=Math.round(n+t[0]*this.#n[e]),i=Math.round(n+.5*Math.log((1+r)/(1-r))*-this.#r[e]);return o>this.#i[e]*this.#e&&(o=this.#i[e]*this.#e),i>this.#i[e]&&(i=this.#i[e]),[o,i]}}ll(t,e){if(V(e)){const n=this.#t*Math.pow(2,e),r=n/360,o=n/(2*Math.PI),i=n/2,a=(t[1]-i)/-o;return[(t[0]-i)/r,L*(2*Math.atan(Math.exp(a))-.5*Math.PI)]}{const n=(t[1]-this.#o[e])/-this.#r[e];return[(t[0]-this.#o[e])/this.#n[e],L*(2*Math.atan(Math.exp(n))-.5*Math.PI)]}}convert(t,e){return e===Z?[...this.forward(t.slice(0,2)),...this.forward(t.slice(2,4))]:[...this.inverse(t.slice(0,2)),...this.inverse(t.slice(2,4))]}inverse(t){return[t[0]*L/_,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/_)))*L]}forward(t){const e=[_*t[0]*F,_*Math.log(Math.tan(.25*Math.PI+.5*t[1]*F))];return e[0]>W&&(e[0]=W),e[0]<-W&&(e[0]=-W),e[1]>W&&(e[1]=W),e[1]<-W&&(e[1]=-W),e}bbox(t,e,n,r,o){r&&(e=Math.pow(2,n)-1-e);const i=[t*this.#t,(+e+1)*this.#t],a=[(+t+1)*this.#t,e*this.#t],s=[...this.ll(i,n),...this.ll(a,n)];return o===Z?this.convert(s,Z):s}xyz(t,e,n,r){const o=r===Z?this.convert(t,"WGS84"):t,i=[o[0],o[1]],a=[o[2],o[3]],s=this.px(i,e),h=this.px(a,e),c=[Math.floor(s[0]/this.#t),Math.floor((h[0]-1)/this.#t)],l=[Math.floor(h[1]/this.#t),Math.floor((s[1]-1)/this.#t)],u={minX:Math.min.apply(Math,c)<0?0:Math.min.apply(Math,c),minY:Math.min.apply(Math,l)<0?0:Math.min.apply(Math,l),maxX:Math.max.apply(Math,c),maxY:Math.max.apply(Math,l)};if(n){const t={minY:Math.pow(2,e)-1-u.maxY,maxY:Math.pow(2,e)-1-u.minY};u.minY=t.minY,u.maxY=t.maxY}return u}}({size:256});function J(t){return 1.40625/Math.pow(2,t)}function Q(t,e,n,r=0){r=r||0;const[o,i]=q,a=(s=n,156543.03392804097/Math.pow(2,s)*X);var s;const h=function(t,e,n){const[r,o]=D,i=J(n)*X;let a=t,s=e;return a=Math.floor(a),s=Math.floor(s),[r+a*i,s*i-o,r+(a+1)*i,(s+1)*i-o]}(t,e,n),c=P(E(h).map((t=>H.forward(t)))),[l,u,f,m]=c;let d=(l-o)/a,g=(f-o)/a,p=(i-m)/a,M=(i-u)/a;if(d=Math.floor(d),g=Math.floor(g),p=Math.floor(p),M=Math.floor(M),g<d||M<p)return;const x=[];for(let t=p;t<=M;t++)for(let e=d;e<=g;e++)x.push([e,t,n+r]);const b=x.map((t=>{const[e,n,r]=t;return H.bbox(e,n,r,!1,"900913")})),[v,w,I,y]=function(t){let e=1/0,n=1/0,r=-1/0,o=-1/0;return t.forEach((t=>{const[i,a,s,h]=t;e=Math.min(e,i),r=Math.max(r,s),n=Math.min(n,a),o=Math.max(o,h)})),[e,n,r,o]}(b);return{tiles:x,tilesbbox:[v,w,I,y],bbox:h,mbbox:c,x:t,y:e,z:n}}function $(t,e,n,r){const{width:o,height:i}=t,[a,s,h,c]=e,l=(h-a)/o,u=(c-s)/i;let[f,m,d,g]=n;f-=l,d+=l,m-=u,g+=u;let v=(f-a)/l,w=(c-g)/u,I=(d-a)/l,y=(c-m)/u;v=Math.floor(v),w=Math.floor(w),I=Math.ceil(I),y=Math.ceil(y);const z=I-v,E=y-w,P=p();M(P,z,E);const T=b(P);x(T),T.drawImage(t,v,w,z,E,0,0,z,E);const A=T.getImageData(0,0,z,E).data,B=[];let k=1/0,N=1/0,O=-1/0,C=-1/0,S=-1;const j="EPSG:4326"===r?H.forward:H.inverse;for(let t=1;t<=E;t++){const e=g-(t-1)*u,n=e-u;for(let r=1;r<=z;r++){const o=(t-1)*z*4+4*(r-1),i=A[o],a=A[o+1],s=A[o+2],h=A[o+3],c=f+(r-1)*l,u=j([c,e]);k=Math.min(k,u[0]),O=Math.max(O,u[0]),N=Math.min(N,u[1]),C=Math.max(C,u[1]);const m=[c,n];B[++S]={point:u,point1:j(m),r:i,g:a,b:s,a:h}}}return{pixels:B,bbox:[k,N,O,C],width:z,height:E,image:P.transferToImageBitmap()}}function tt(t,e){const[n,r,o,i]=e,a=(o-n)/X,s=(i-r)/X,{pixels:h,bbox:c}=t,[l,u,f,m]=c;let d=(f-l)/a,g=(m-u)/s;if(d=Math.round(d),g=Math.round(g),isNaN(d)||isNaN(g)||0===Math.min(d,g)||Math.abs(d)===1/0||Math.abs(g)===1/0)return;const v=p();M(v,d,g);const w=b(v);function I(t,e){let n=Math.round((t-l)/a+1);n=Math.min(n,d);let r=Math.round((m-e)/s+1);return r=Math.min(r,g),[n,r]}x(w);const y=w.createImageData(d,g),z=y.data;for(let t=0,e=h.length;t<e;t++){const{point:e,point1:n,r:r,g:o,b:i,a:a}=h[t],[s,c]=e,[l,u]=n,[f,m]=I(s,c),[g,p]=I(l,u);for(let t=m;t<=p;t++){const e=(t-1)*d*4+4*(f-1);z[e]=r,z[e+1]=o,z[e+2]=i,z[e+3]=a}}w.putImageData(y,0,0);const E=v.transferToImageBitmap(),P=Math.round((n-l)/a),T=Math.round((m-i)/s),A=p();M(A,X,X);const B=b(v);return x(B),B.drawImage(E,P-1,T,X,X,0,0,X,X),A.transferToImageBitmap()}function et(t){return new Promise(((e,n)=>{const{urlTemplate:r,x:o,y:i,z:a,maxAvailableZoom:s,projection:h,zoomOffset:c,errorLog:l}=t,f=s&&u(s)&&s>=1;if(!h)return void n(new Error("not find projection"));if(-1===K.indexOf(h))return void n(new Error("not support projection:"+h+".the support:"+K.join(",").toString()));if(!f)return void n(new Error("maxAvailableZoom is error"));if(!r)return void n(new Error("urlTemplate is error"));if(!u(o)||!u(i)||!u(a))return void n(new Error("x/y/z is error"));(()=>{let n;"EPSG:4326"===h?n=function(t,e,n,r=0){r=r||0;const[o,i]=D,a=J(n)*X,s=H.bbox(t,e,n),[h,c,l,u]=s;let f=(h-o)/a,m=(l-o)/a,g=(i-u)/a,p=(i-c)/a;if(f=Math.floor(f),m=Math.floor(m),g=Math.floor(g),p=Math.floor(p),m<f||p<g)return;const M=[];for(let t=g;t<=p;t++)for(let e=f;e<=m;e++)M.push([e-1,t,n+r]);return{tiles:M,tilesbbox:[o+(f-1)*a,i-(p+1)*a,o+m*a,i-g*a],bbox:s,mbbox:P(E(s).map((t=>d(t)))),x:t,y:e,z:n}}(o,i,a,c||0):"EPSG:3857"===h&&(n=Q(o,i,a,c||0));const{tiles:r}=n||{};if(!r||0===r.length)return void e(v());n.loadCount=0;const s=()=>{if(n.loadCount>=r.length){const t=function(t){let e=1/0,n=1/0,r=-1/0,o=-1/0,i=256;t.forEach((t=>{const[a,s]=t;e=Math.min(a,e),n=Math.min(s,n),r=Math.max(a,r),o=Math.max(s,o),i=t.tileImage.width}));const a=(r-e+1)*i,s=(o-n+1)*i,h=p();M(h,a,s);const c=b(h);return x(c),t.forEach((t=>{const[r,o]=t,a=(r-e)*i,s=(o-n)*i;c.drawImage(t.tileImage,a,s,i,i)})),h.transferToImageBitmap()}(r);let o;if("EPSG:4326"===h){o=tt($(t,n.tilesbbox,n.bbox,h),n.mbbox),e(o||v())}else{o=tt($(t,n.tilesbbox,n.mbbox,h),n.bbox),e(o||v())}}else{const e=r[n.loadCount],[o,i,a]=e;R(Object.assign({},t,{x:o,y:i,z:a})).then((t=>{e.tileImage=t,n.loadCount++,s()})).catch((t=>{l&&console.error(t),e.tileImage=v(),n.loadCount++,s()}))}};s()})()}))}t.initialize=function(){},t.onmessage=function(t,e){const n=t.data||{},r=n._type;if("getTile"!==r)if("getTileWithMaxZoom"!==r)if("clipTile"!==r)if("transformTile"!==r){if("injectMask"===r){const t=B(n.maskId,n.geojsonFeature);return t instanceof Error?void e(t):void e()}if("removeMask"===r)return o=n.maskId,delete T[o],void e();var o;console.error("not support message type:",r)}else et(n).then((t=>{const n=[];t instanceof ImageBitmap&&n.push(t),e(null,t,n)})).catch((t=>{e(t)}));else C(n).then((t=>{const n=[];t instanceof ImageBitmap&&n.push(t),e(null,t,n)})).catch((t=>{e(t)}));else R(n).then((t=>{e(null,t,[t])})).catch((t=>{e(t)}));else{const{url:t}=n;(function(t,e){return new Promise(((n,r)=>{if(!t)return void r(new Error("url is null"));const o=f(t),i=Object.assign({},j,e.headers||{}),a=o.map((t=>G(t,i,e)));Promise.all(a).then((t=>{const o=p();if(!o)return void r(m);const i=w(t);if(i instanceof Error)return void r(i);const a=e.filter;let s;s=a?y(o,i,a):i,n(z(s,e.opacity))})).catch((t=>{r(t)}))}))})(t,n).then((t=>{e(null,t,[t])})).catch((t=>{e(t)}))}},Object.defineProperty(t,"__esModule",{value:!0})})`
